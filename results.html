<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Results - Bolt</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="app-window">
        <!-- Decorative background glow for consistency -->
        <div class="hero-glow"></div>

        <header>
            <a href="/" class="logo">⚡ Bolt</a>
            <nav>
                 <a href="index.html" class="nav-button ghost">← New Prompt</a>
            </nav>
        </header>

        <main class="results-page-content">
            <h2>Your Curated Ideas</h2>
            <div id="results-container">
                <!-- Loader -->
                <div class="loader-container">
                    <div class="loader"></div>
                    <p>Contacting the creative core...</p>
                </div>
                <!-- Results will be injected here -->
            </div>
        </main>
    </div>

    <script>
     

      // --- SCRIPT FOR RESULTS.HTML ---

// IMPORTANT: REPLACE THIS WITH YOUR ACTUAL n8n WEBHOOK URL
const N8N_WEBHOOK_URL = 'https://capital-monkfish-wrongly.ngrok-free.app/webhook-test/4c035729-6429-4891-b426-a9b7b0411cbe'; 

document.addEventListener('DOMContentLoaded', async () => {
    const resultsContainer = document.getElementById('results-container');
    
    // 1. Get the stringified payload from sessionStorage
    const payloadString = sessionStorage.getItem('userPayload');

    if (!payloadString) {
        resultsContainer.innerHTML = '<div class="error-card">No prompt data found. Please <a href="index.html">go back</a> and enter a prompt.</div>';
        return;
    }

    // 2. Parse the string back into a JavaScript object
    const payload = JSON.parse(payloadString);

    try {
        // 3. Send the entire payload object to the n8n webhook
        const response = await fetch(N8N_WEBHOOK_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload) // Send the full object
        });

        if (!response.ok) throw new Error(`Network response was not ok: ${response.statusText}`);
        
        const data = await response.json();
        
        resultsContainer.innerHTML = ''; // Clear loader
        
        if (data.results && data.results.length > 0) {
            data.results.forEach(item => {
                const card = document.createElement('div');
                card.className = 'result-card';
                card.innerHTML = `<h3>${item.title}</h3><p>${item.description}</p>`;
                resultsContainer.appendChild(card);
            });
        } else {
             resultsContainer.innerHTML = '<div class="error-card">No results were returned. Try refining your prompt.</div>';
        }

    } catch (error) {
        console.error('Error fetching data from n8n:', error);
        resultsContainer.innerHTML = `<div class="error-card">An error occurred while fetching your results. Please check the console.</div>`;
    }
});
    </script>

</body>
</html>